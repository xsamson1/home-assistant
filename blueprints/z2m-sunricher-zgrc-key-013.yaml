blueprint:
  name: Sunricher ZGRC-KEY-013 Zigbee2MQTT HA Groups
  description: Control 4 HA light groups with Sunricher remote
  domain: automation

  input:
    remote_name:
      name: Zigbee2MQTT friendly name of remote
      selector:
        text:

    light_g1:
      name: Light group 1
      selector:
        entity:
          domain: light

    light_g2:
      name: Light group 2
      selector:
        entity:
          domain: light

    light_g3:
      name: Light group 3
      selector:
        entity:
          domain: light

    light_g4:
      name: Light group 4
      selector:
        entity:
          domain: light

mode: restart
max_exceeded: silent

trigger:
  - platform: mqtt
    topic: zigbee2mqtt/+/action

variables:
  remote: !input remote_name
  topic: "{{ trigger.topic }}"
  action: "{{ trigger.payload }}"

condition:
  - "{{ topic == 'zigbee2mqtt/' ~ remote ~ '/action' }}"

action:
  - choose:

      ############################
      # GROUP 1
      ############################
      - conditions: "{{ action == 'on_1' }}"
        sequence:
          - service: light.turn_on
            target:
              entity_id: !input light_g1

      - conditions: "{{ action == 'off_1' }}"
        sequence:
          - service: light.turn_off
            target:
              entity_id: !input light_g1

      - conditions: "{{ action == 'brightness_move_up_1' }}"
        sequence:
          - service: light.turn_on
            target:
              entity_id: !input light_g1
            data:
              brightness_step: 15

      - conditions: "{{ action == 'brightness_move_down_1' }}"
        sequence:
          - service: light.turn_on
            target:
              entity_id: !input light_g1
            data:
              brightness_step: -15

      ############################
      # GROUP 2
      ############################
      - conditions: "{{ action == 'on_2' }}"
        sequence:
          - service: light.turn_on
            target:
              entity_id: !input light_g2

      - conditions: "{{ action == 'off_2' }}"
        sequence:
          - service: light.turn_off
            target:
              entity_id: !input light_g2

      - conditions: "{{ action == 'brightness_move_up_2' }}"
        sequence:
          - service: light.turn_on
            target:
              entity_id: !input light_g2
            data:
              brightness_step: 15

      - conditions: "{{ action == 'brightness_move_down_2' }}"
        sequence:
          - service: light.turn_on
            target:
              entity_id: !input light_g2
            data:
              brightness_step: -15

      ############################
      # GROUP 3
      ############################
      - co
